var sets = [{
    "id": 0,
    "title": "72 Base Cards",
    "cards": [{
        "caption": "Old Wounds",
        "count": 0,
        "id": "card-0-0",
        "image": "01.jpg"
    }, {
        "caption": "Old Wounds",
        "count": 0,
        "id": "card-0-1",
        "image": "02.jpg"
    }, {
        "caption": "Old Wounds",
        "count": 0,
        "id": "card-0-2",
        "image": "03.jpg"
    }, {
        "caption": "Old Wounds",
        "count": 0,
        "id": "card-0-3",
        "image": "04.jpg"
    }, {
        "caption": "Old Wounds",
        "count": 0,
        "id": "card-0-4",
        "image": "05.jpg"
    }, {
        "caption": "Old Wounds",
        "count": 0,
        "id": "card-0-5",
        "image": "06.jpg"
    }, {
        "caption": "Command Performance",
        "count": 0,
        "id": "card-0-6",
        "image": "07.jpg"
    }, {
        "caption": "Command Performance",
        "count": 0,
        "id": "card-0-7",
        "image": "08.jpg"
    }, {
        "caption": "Command Performance",
        "count": 0,
        "id": "card-0-8",
        "image": "09.jpg"
    }, {
        "caption": "Command Performance",
        "count": 0,
        "id": "card-0-9",
        "image": "10.jpg"
    }, {
        "caption": "Command Performance",
        "count": 0,
        "id": "card-0-10",
        "image": "11.jpg"
    }, {
        "caption": "Command Performance",
        "count": 0,
        "id": "card-0-11",
        "image": "12.jpg"
    }, {
        "caption": "About a Girl",
        "count": 0,
        "id": "card-0-12",
        "image": "13.jpg"
    }, {
        "caption": "About a Girl",
        "count": 0,
        "id": "card-0-13",
        "image": "14.jpg"
    }, {
        "caption": "About a Girl",
        "count": 0,
        "id": "card-0-14",
        "image": "15.jpg"
    }, {
        "caption": "About a Girl",
        "count": 0,
        "id": "card-0-15",
        "image": "16.jpg"
    }, {
        "caption": "About a Girl",
        "count": 0,
        "id": "card-0-16",
        "image": "17.jpg"
    }, {
        "caption": "About a Girl",
        "count": 0,
        "id": "card-0-17",
        "image": "18.jpg"
    }, {
        "caption": "If the Stars Should Appear",
        "count": 0,
        "id": "card-0-18",
        "image": "19.jpg"
    }, {
        "caption": "If the Stars Should Appear",
        "count": 0,
        "id": "card-0-19",
        "image": "20.jpg"
    }, {
        "caption": "If the Stars Should Appear",
        "count": 0,
        "id": "card-0-20",
        "image": "21.jpg"
    }, {
        "caption": "If the Stars Should Appear",
        "count": 0,
        "id": "card-0-21",
        "image": "22.jpg"
    }, {
        "caption": "If the Stars Should Appear",
        "count": 0,
        "id": "card-0-22",
        "image": "23.jpg"
    }, {
        "caption": "If the Stars Should Appear",
        "count": 0,
        "id": "card-0-23",
        "image": "24.jpg"
    }, {
        "caption": "Pria",
        "count": 0,
        "id": "card-0-24",
        "image": "25.jpg"
    }, {
        "caption": "Pria",
        "count": 0,
        "id": "card-0-25",
        "image": "26.jpg"
    }, {
        "caption": "Pria",
        "count": 0,
        "id": "card-0-26",
        "image": "27.jpg"
    }, {
        "caption": "Pria",
        "count": 0,
        "id": "card-0-27",
        "image": "28.jpg"
    }, {
        "caption": "Pria",
        "count": 0,
        "id": "card-0-28",
        "image": "29.jpg"
    }, {
        "caption": "Pria",
        "count": 0,
        "id": "card-0-29",
        "image": "30.jpg"
    }, {
        "caption": "Krill",
        "count": 0,
        "id": "card-0-30",
        "image": "31.jpg"
    }, {
        "caption": "Krill",
        "count": 0,
        "id": "card-0-31",
        "image": "32.jpg"
    }, {
        "caption": "Krill",
        "count": 0,
        "id": "card-0-32",
        "image": "33.jpg"
    }, {
        "caption": "Krill",
        "count": 0,
        "id": "card-0-33",
        "image": "34.jpg"
    }, {
        "caption": "Krill",
        "count": 0,
        "id": "card-0-34",
        "image": "35.jpg"
    }, {
        "caption": "Krill",
        "count": 0,
        "id": "card-0-35",
        "image": "36.jpg"
    }, {
        "caption": "Majority Rule",
        "count": 0,
        "id": "card-0-36",
        "image": "37.jpg"
    }, {
        "caption": "Majority Rule",
        "count": 0,
        "id": "card-0-37",
        "image": "38.jpg"
    }, {
        "caption": "Majority Rule",
        "count": 0,
        "id": "card-0-38",
        "image": "39.jpg"
    }, {
        "caption": "Majority Rule",
        "count": 0,
        "id": "card-0-39",
        "image": "40.jpg"
    }, {
        "caption": "Majority Rule",
        "count": 0,
        "id": "card-0-40",
        "image": "41.jpg"
    }, {
        "caption": "Majority Rule",
        "count": 0,
        "id": "card-0-41",
        "image": "42.jpg"
    }, {
        "caption": "Into the Fold",
        "count": 0,
        "id": "card-0-42",
        "image": "43.jpg"
    }, {
        "caption": "Into the Fold",
        "count": 0,
        "id": "card-0-43",
        "image": "44.jpg"
    }, {
        "caption": "Into the Fold",
        "count": 0,
        "id": "card-0-44",
        "image": "45.jpg"
    }, {
        "caption": "Into the Fold",
        "count": 0,
        "id": "card-0-45",
        "image": "46.jpg"
    }, {
        "caption": "Into the Fold",
        "count": 0,
        "id": "card-0-46",
        "image": "47.jpg"
    }, {
        "caption": "Into the Fold",
        "count": 0,
        "id": "card-0-47",
        "image": "48.jpg"
    }, {
        "caption": "Cupid's Dagger",
        "count": 0,
        "id": "card-0-48",
        "image": "49.jpg"
    }, {
        "caption": "Cupid's Dagger",
        "count": 0,
        "id": "card-0-49",
        "image": "50.jpg"
    }, {
        "caption": "Cupid's Dagger",
        "count": 0,
        "id": "card-0-50",
        "image": "51.jpg"
    }, {
        "caption": "Cupid's Dagger",
        "count": 0,
        "id": "card-0-51",
        "image": "52.jpg"
    }, {
        "caption": "Cupid's Dagger",
        "count": 0,
        "id": "card-0-52",
        "image": "53.jpg"
    }, {
        "caption": "Cupid's Dagger",
        "count": 0,
        "id": "card-0-53",
        "image": "54.jpg"
    }, {
        "caption": "Firestorm",
        "count": 0,
        "id": "card-0-54",
        "image": "55.jpg"
    }, {
        "caption": "Firestorm",
        "count": 0,
        "id": "card-0-55",
        "image": "56.jpg"
    }, {
        "caption": "Firestorm",
        "count": 0,
        "id": "card-0-56",
        "image": "57.jpg"
    }, {
        "caption": "Firestorm",
        "count": 0,
        "id": "card-0-57",
        "image": "58.jpg"
    }, {
        "caption": "Firestorm",
        "count": 0,
        "id": "card-0-58",
        "image": "59.jpg"
    }, {
        "caption": "Firestorm",
        "count": 0,
        "id": "card-0-59",
        "image": "60.jpg"
    }, {
        "caption": "New Dimensions",
        "count": 0,
        "id": "card-0-60",
        "image": "61.jpg"
    }, {
        "caption": "New Dimensions",
        "count": 0,
        "id": "card-0-61",
        "image": "62.jpg"
    }, {
        "caption": "New Dimensions",
        "count": 0,
        "id": "card-0-62",
        "image": "63.jpg"
    }, {
        "caption": "New Dimensions",
        "count": 0,
        "id": "card-0-63",
        "image": "64.jpg"
    }, {
        "caption": "New Dimensions",
        "count": 0,
        "id": "card-0-64",
        "image": "65.jpg"
    }, {
        "caption": "New Dimensions",
        "count": 0,
        "id": "card-0-65",
        "image": "66.jpg"
    }, {
        "caption": "Mad Idolatry",
        "count": 0,
        "id": "card-0-66",
        "image": "67.jpg"
    }, {
        "caption": "Mad Idolatry",
        "count": 0,
        "id": "card-0-67",
        "image": "68.jpg"
    }, {
        "caption": "Mad Idolatry",
        "count": 0,
        "id": "card-0-68",
        "image": "69.jpg"
    }, {
        "caption": "Mad Idolatry",
        "count": 0,
        "id": "card-0-69",
        "image": "70.jpg"
    }, {
        "caption": "Mad Idolatry",
        "count": 0,
        "id": "card-0-70",
        "image": "71.jpg"
    }, {
        "caption": "Mad Idolatry",
        "count": 0,
        "id": "card-0-71",
        "image": "72.jpg"
    }]
}, {
    "id": 1,
    "title": "8 Bridge Crew Cards (1:24 packs)",
    "cards": [{
        "caption": "Captain Ed Mercer",
        "count": 0,
        "id": "card-1-0",
        "image": "CC1.jpg"
    }, {
        "caption": "Commander Kelly Grayson",
        "count": 0,
        "id": "card-1-1",
        "image": "CC2.jpg"
    }, {
        "caption": "Doctor Claire Finn",
        "count": 0,
        "id": "card-1-2",
        "image": "CC3.jpg"
    }, {
        "caption": "Lieutenant Gordon Malloy",
        "count": 0,
        "id": "card-1-3",
        "image": "CC4.jpg"
    }, {
        "caption": "Lieutenant Commander Bortus",
        "count": 0,
        "id": "card-1-4",
        "image": "CC5.jpg"
    }, {
        "caption": "Lieutenant Alara Kitan",
        "count": 0,
        "id": "card-1-5",
        "image": "CC6.jpg"
    }, {
        "caption": "Lieutenant Commander John Lamarr",
        "count": 0,
        "id": "card-1-6",
        "image": "CC7.jpg"
    }, {
        "caption": "Isaac",
        "count": 0,
        "id": "card-1-7",
        "image": "CC8.jpg"
    }]
}, {
    "id": 2,
    "title": "8 Mirror Bridge Crew Parallel Cards (1:144 packs)",
    "cards": [{
        "caption": "Captain Ed Mercer",
        "count": 0,
        "id": "card-2-0",
        "image": "cm01.jpg"
    }, {
        "caption": "Commander Kelly Grayson",
        "count": 0,
        "id": "card-2-1",
        "image": "cm02.jpg"
    }, {
        "caption": "Doctor Claire Finn",
        "count": 0,
        "id": "card-2-2",
        "image": "cm03.jpg"
    }, {
        "caption": "Lieutenant Gordon Malloy",
        "count": 0,
        "id": "card-2-3",
        "image": "cm04.jpg"
    }, {
        "caption": "Lieutenant Commander Bortus",
        "count": 0,
        "id": "card-2-4",
        "image": "cm05.jpg"
    }, {
        "caption": "Lieutenant Alara Kitan",
        "count": 0,
        "id": "card-2-5",
        "image": "cm06.jpg"
    }, {
        "caption": "Lieutenant Commander John Lamarr",
        "count": 0,
        "id": "card-2-6",
        "image": "cm07.jpg"
    }, {
        "caption": "Isaac",
        "count": 0,
        "id": "card-2-7",
        "image": "cm08.jpg"
    }]
}, {
    "id": 3,
    "title": "14 Quotable Cards (1:24 packs)",
    "cards": [{
        "caption": "The Quotable Orville",
        "count": 0,
        "id": "card-3-0",
        "image": "Q01.jpg"
    }, {
        "caption": "The Quotable Orville",
        "count": 0,
        "id": "card-3-1",
        "image": "Q02.jpg"
    }, {
        "caption": "The Quotable Orville",
        "count": 0,
        "id": "card-3-2",
        "image": "Q03.jpg"
    }, {
        "caption": "The Quotable Orville",
        "count": 0,
        "id": "card-3-3",
        "image": "Q04.jpg"
    }, {
        "caption": "The Quotable Orville",
        "count": 0,
        "id": "card-3-4",
        "image": "Q05.jpg"
    }, {
        "caption": "The Quotable Orville",
        "count": 0,
        "id": "card-3-5",
        "image": "Q06.jpg"
    }, {
        "caption": "The Quotable Orville",
        "count": 0,
        "id": "card-3-6",
        "image": "Q07.jpg"
    }, {
        "caption": "The Quotable Orville",
        "count": 0,
        "id": "card-3-7",
        "image": "Q08.jpg"
    }, {
        "caption": "The Quotable Orville",
        "count": 0,
        "id": "card-3-8",
        "image": "Q09.jpg"
    }, {
        "caption": "The Quotable Orville",
        "count": 0,
        "id": "card-3-9",
        "image": "Q10.jpg"
    }, {
        "caption": "The Quotable Orville",
        "count": 0,
        "id": "card-3-10",
        "image": "Q11.jpg"
    }, {
        "caption": "The Quotable Orville",
        "count": 0,
        "id": "card-3-11",
        "image": "Q12.jpg"
    }, {
        "caption": "The Quotable Orville",
        "count": 0,
        "id": "card-3-12",
        "image": "Q13.jpg"
    }, {
        "caption": "The Quotable Orville",
        "count": 0,
        "id": "card-3-13",
        "image": "Q14.jpg"
    }]
}, {
    "id": 4,
    "title": "9 The Orville Ship Cards (1:24 packs)",
    "cards": [{
        "caption": "The Orville",
        "count": 0,
        "id": "card-4-0",
        "image": "O1.jpg"
    }, {
        "caption": "The Orville",
        "count": 0,
        "id": "card-4-1",
        "image": "O2.jpg"
    }, {
        "caption": "The Orville",
        "count": 0,
        "id": "card-4-2",
        "image": "O3.jpg"
    }, {
        "caption": "The Orville",
        "count": 0,
        "id": "card-4-3",
        "image": "O4.jpg"
    }, {
        "caption": "The Orville",
        "count": 0,
        "id": "card-4-4",
        "image": "O5.jpg"
    }, {
        "caption": "The Orville",
        "count": 0,
        "id": "card-4-5",
        "image": "O6.jpg"
    }, {
        "caption": "The Orville",
        "count": 0,
        "id": "card-4-6",
        "image": "O7.jpg"
    }, {
        "caption": "The Orville",
        "count": 0,
        "id": "card-4-7",
        "image": "O8.jpg"
    }, {
        "caption": "The Orville",
        "count": 0,
        "id": "card-4-8",
        "image": "O9.jpg"
    }]
}, {
    "id": 5,
    "title": "9 Tour The Orville Cards (1:24 packs)",
    "cards": [{
        "caption": "The Bridge",
        "count": 0,
        "id": "card-5-0",
        "image": "T01.jpg"
    }, {
        "caption": "Briefing Room",
        "count": 0,
        "id": "card-5-1",
        "image": "T02.jpg"
    }, {
        "caption": "Captain's Office",
        "count": 0,
        "id": "card-5-2",
        "image": "T03.jpg"
    }, {
        "caption": "Corridors",
        "count": 0,
        "id": "card-5-3",
        "image": "T04.jpg"
    }, {
        "caption": "Crew Quarters",
        "count": 0,
        "id": "card-5-4",
        "image": "T05.jpg"
    }, {
        "caption": "Engineering",
        "count": 0,
        "id": "card-5-5",
        "image": "T06.jpg"
    }, {
        "caption": "Shuttle Bay",
        "count": 0,
        "id": "card-5-6",
        "image": "T07.jpg"
    }, {
        "caption": "Sickbay",
        "count": 0,
        "id": "card-5-7",
        "image": "T08.jpg"
    }, {
        "caption": "Simulator",
        "count": 0,
        "id": "card-5-8",
        "image": "T09.jpg"
    }]
}, {
    "id": 6,
    "title": "7 Off-Duty Cards (1:24 packs)",
    "cards": [{
        "caption": "Captain Ed Mercer",
        "count": 0,
        "id": "card-6-0",
        "image": "D1.jpg"
    }, {
        "caption": "Commander Kelly Grayson",
        "count": 0,
        "id": "card-6-1",
        "image": "D2.jpg"
    }, {
        "caption": "Doctor Claire Finn",
        "count": 0,
        "id": "card-6-2",
        "image": "D3.jpg"
    }, {
        "caption": "Lieutenant Gordon Malloy",
        "count": 0,
        "id": "card-6-3",
        "image": "D4.jpg"
    }, {
        "caption": "Lieutenant Commander Bortus",
        "count": 0,
        "id": "card-6-4",
        "image": "D5.jpg"
    }, {
        "caption": "Lieutenant Alara Kitan",
        "count": 0,
        "id": "card-6-5",
        "image": "D6.jpg"
    }, {
        "caption": "Lieutenant Commander John Lamarr",
        "count": 0,
        "id": "card-6-6",
        "image": "D7.jpg"
    }]
}, {
    "id": 7,
    "title": "40 Autograph Cards (1:12 packs)",
    "cards": [{
        "caption": "Seth MacFarlane as Captain Ed Mercer (Full Bleed) Scarce",
        "count": 0,
        "id": "card-7-0",
        "image": "MacFarlane.jpg"
    }, {
        "caption": "Rob Lowe as Darulio (Full Bleed) Scarce",
        "count": 0,
        "id": "card-7-1",
        "image": "Lowe-FB.jpg"
    }, {
        "caption": "Peter Macon as Lt. Commander Bortus (Full Bleed) (Extremely Limited)",
        "count": 0,
        "id": "card-7-2",
        "image": "Macon-FB.jpg"
    }, {
        "caption": "Mark Jackson as Isaac (Full Bleed) (Very Limited)",
        "count": 0,
        "id": "card-7-3",
        "image": "Jackson-FB.jpg"
    }, {
        "caption": "Penny Johnson Jerald as Dr. Claire Finn (Full Bleed) (Very Limited)",
        "count": 0,
        "id": "card-7-4",
        "image": "Jerald-FB.jpg"
    }, {
        "caption": "Scott Grimes as Lt. Gordon Malloy (Full Bleed) (Very Limited)",
        "count": 0,
        "id": "card-7-5",
        "image": "Grimes-FB.jpg"
    }, {
        "caption": "Adrianne Palicki as Commander Kelly Grayson (Full Bleed) (Very Limited)",
        "count": 0,
        "id": "card-7-6",
        "image": "Palacki-FB.jpg"
    }, {
        "caption": "Kelly Hu as Admiral Ozawa (Bordered) (Very Limited)",
        "count": 0,
        "id": "card-7-7",
        "image": "Hu.jpg"
    }, {
        "caption": "Gavin Lee as Henry Park (Bordered) (Limited)",
        "count": 0,
        "id": "card-7-8",
        "image": "lee.jpg"
    }, {
        "caption": "Larry Joe Campbell as Chief Engineer Steve Newton (Bordered) (Limited)",
        "count": 0,
        "id": "card-7-9",
        "image": "campbell.jpg"
    }, {
        "caption": "Patrick Cox as The Ogre (Bordered) (Limited)",
        "count": 0,
        "id": "card-7-10",
        "image": "cox.jpg"
    }, {
        "caption": "Christine Corpuz as Dr. Janice Lee (Bordered) (Limited)",
        "count": 0,
        "id": "card-7-11",
        "image": "corpuz.jpg"
    }, {
        "caption": "JD Cullum as Calivon Zoo Administrator (Bordered) (Limited)",
        "count": 0,
        "id": "card-7-12",
        "image": "cullum.jpg"
    }, {
        "caption": "Jeremy Guskin as Furry Alien (Bordered) (Limited)",
        "count": 0,
        "id": "card-7-13",
        "image": "guskin.jpg"
    }, {
        "caption": "Brett Rickaby as Lurenek (Bordered) (Limited)",
        "count": 0,
        "id": "card-7-14",
        "image": "rickaby.jpg"
    }, {
        "caption": "Sean Cook as Dr. Derek Ashton (Bordered) (Limited)",
        "count": 0,
        "id": "card-7-15",
        "image": "cook.jpg"
    }, {
        "caption": "Rena Owen as Heveena/Gondus Elden (Bordered) (Limited)",
        "count": 0,
        "id": "card-7-16",
        "image": "owen.jpg"
    }, {
        "caption": "Antonio D. Charity as Advocate Kagus (Bordered) (Limited)",
        "count": 0,
        "id": "card-7-17",
        "image": "charity.jpg"
    }, {
        "caption": "James Morrison as Kemka (Bordered) (Limited)",
        "count": 0,
        "id": "card-7-18",
        "image": "morrison.jpg"
    }, {
        "caption": "Robert Knepper as Hamelac (Bordered) (Very Limited)",
        "count": 0,
        "id": "card-7-19",
        "image": "knepper.jpg"
    }, {
        "caption": "Max Burkholder as Tomilin (Bordered) (Limited)",
        "count": 0,
        "id": "card-7-20",
        "image": "burkholder.jpg"
    }, {
        "caption": "Michaela McManus as Teleya (Bordered) (Limited)",
        "count": 0,
        "id": "card-7-21",
        "image": "mcmanus.jpg"
    }, {
        "caption": "James Horan as Sazeron (Bordered) (Limited)",
        "count": 0,
        "id": "card-7-22",
        "image": "horan.jpg"
    }, {
        "caption": "Dylan Kenin as Krill Captain Haros (Bordered) (Limited)",
        "count": 0,
        "id": "card-7-23",
        "image": "kenin.jpg"
    }, {
        "caption": "Makabe Ganey as Coja (Bordered) (Limited)",
        "count": 0,
        "id": "card-7-24",
        "image": "ganey.jpg"
    }, {
        "caption": "Giorgia Whigham as Lysella (Bordered) (Limited)",
        "count": 0,
        "id": "card-7-25",
        "image": "whigham.jpg"
    }, {
        "caption": "Catherine Shu as Hoshel (Bordered) (Limited)",
        "count": 0,
        "id": "card-7-26",
        "image": "shu.jpg"
    }, {
        "caption": "Barry Livingston as Tom (Bordered) (Limited)",
        "count": 0,
        "id": "card-7-27",
        "image": "livingston.jpg"
    }, {
        "caption": "Steven Culp as Willks (Bordered) (Limited)",
        "count": 0,
        "id": "card-7-28",
        "image": "culp.jpg"
    }, {
        "caption": "Brian Thompson as Drogen (Bordered) (Limited)",
        "count": 0,
        "id": "card-7-29",
        "image": "thompson.jpg"
    }, {
        "caption": "Ralph Garman as Kanoot (Bordered) (Limited)",
        "count": 0,
        "id": "card-7-30",
        "image": "garman.jpg"
    }, {
        "caption": "J. Paul Boehmer as Navarian Ambassador (Bordered) (Limited)",
        "count": 0,
        "id": "card-7-31",
        "image": "Boehmer.jpg"
    }, {
        "caption": "Tim Mikulecky as Lt. Harrison Payne (Bordered) (Limited)",
        "count": 0,
        "id": "card-7-32",
        "image": "Mikulkey.jpg"
    }, {
        "caption": "Seth Austin as The Clown (Bordered) (Limited)",
        "count": 0,
        "id": "card-7-33",
        "image": "austin.jpg"
    }, {
        "caption": "Robert Picardo as Ildis Kitan (Bordered) (Limited)",
        "count": 0,
        "id": "card-7-34",
        "image": "picardo.jpg"
    }, {
        "caption": "Paul Vogt as Blavaroch (Bordered) (Limited)",
        "count": 0,
        "id": "card-7-35",
        "image": "vogt.jpg"
    }, {
        "caption": "Philip Anthony-Rodriguez as Fadolin (Bordered) (Limited)",
        "count": 0,
        "id": "card-7-36",
        "image": "Anthony-Rodriguez.jpg"
    }, {
        "caption": "Erica Tazel as Baleth (Bordered) (Limited)",
        "count": 0,
        "id": "card-7-37",
        "image": "tazel.jpg"
    }, {
        "caption": "Lenny Von Dohlen as Valondis (Bordered) (Limited)",
        "count": 0,
        "id": "card-7-38",
        "image": "Vondohlen.jpg"
    }, {
        "caption": "Philip Anthony-Rodriguez and Eric Tazel (Dual) (Limited)",
        "count": 0,
        "id": "card-7-39",
        "image": "Tazel_Dual.jpg"
    }]
}, {
    "id": 8,
    "title": "10 Relic Cards (1:96 packs)",
    "cards": [{
        "caption": "Capt. Ed Mercer",
        "count": 0,
        "id": "card-8-0",
        "image": "RC01.jpg"
    }, {
        "caption": "Cmdr. Kelly Grayson",
        "count": 0,
        "id": "card-8-1",
        "image": "RC02.jpg"
    }, {
        "caption": "Dr. Claire Finn",
        "count": 0,
        "id": "card-8-2",
        "image": "RC03.jpg"
    }, {
        "caption": "Lt. Gordon Malloy",
        "count": 0,
        "id": "card-8-3",
        "image": "RC04.jpg"
    }, {
        "caption": "Lt. Cmdr. Bortus",
        "count": 0,
        "id": "card-8-4",
        "image": "RC05.jpg"
    }, {
        "caption": "Lt. Alara Kitan",
        "count": 0,
        "id": "card-8-5",
        "image": "RC06.jpg"
    }, {
        "caption": "Lt. John Lamarr",
        "count": 0,
        "id": "card-8-6",
        "image": "RC07.jpg"
    }, {
        "caption": "Lt. Cmdr. Steve Newton",
        "count": 0,
        "id": "card-8-7",
        "image": "RC08.jpg"
    }, {
        "caption": "Teleya",
        "count": 0,
        "id": "card-8-8",
        "image": "RC09.jpg"
    }, {
        "caption": "Krill Captain Haros",
        "count": 0,
        "id": "card-8-9",
        "image": "RC10.jpg"
    }]
}, {
    "id": 9,
    "title": "Case Topper",
    "cards": [{
        "caption": "The Anhkana",
        "count": 0,
        "id": "card-9-0",
        "image": "CT1.jpg"
    }]
}, {
    "id": 10,
    "title": "6-Case Incentive",
    "cards": [{
        "caption": "Dual Autograph card signed by Robert Picardo and Molly Hagen",
        "count": 0,
        "id": "card-10-0",
        "image": "6-case.jpg"
    }]
}, {
    "id": 11,
    "title": "9-Case Incentive",
    "cards": [{
        "caption": "Dual Autograph Card signed by Adrianne Palicki as Commander Kelly Grayson and Rob Lowe as Darulio",
        "count": 0,
        "id": "card-11-0",
        "image": "9-case.jpg"
    }]
}, {
    "id": 12,
    "title": "Rittenhouse Rewards Card",
    "cards": [{
        "caption": "Captain's Quarters",
        "count": 0,
        "id": "card-12-0",
        "image": "T10.jpg"
    }]
}, {
    "id": 13,
    "title": "Archive Box Exclusive Card",
    "cards": [{
        "caption": "Rob Lowe  as Daruilo (Bordered) Autograph Card",
        "count": 0,
        "id": "card-13-0",
        "image": "ABE_Lowe.jpg"
    }]
}, {
    "id": 14,
    "title": "4 Promo Cards",
    "cards": [{
        "caption": "General Distribution",
        "count": 0,
        "id": "card-14-0",
        "image": "P1.jpg"
    }, {
        "caption": "Non-Sport Update Magazine",
        "count": 0,
        "id": "card-14-1",
        "image": "P2.jpg"
    }, {
        "caption": "Album Exclusive",
        "count": 0,
        "id": "card-14-2",
        "image": "P3.jpg"
    }, {
        "caption": "Facebook Fan Exclusive",
        "count": 0,
        "id": "card-14-3",
        "image": "P4.jpg"
    }]
}];

let ownedCards = getStorage();
let gridDensity = "high";
renderSets();

document.querySelectorAll("label.btn").forEach(e => e.addEventListener("click", switchDensity));

function switchDensity() {
    let option = this.firstElementChild.id;
    if (option !== gridDensity) {
        gridDensity = option;
        renderSets();
    }
}

function removeChildren(id) {
    let sets = document.getElementById(id);
    while (sets.firstChild) {
        sets.removeChild(sets.firstChild);
    }
}

function renderSets() {
    removeChildren("sets");
    removeChildren("setsNav");
    
    let setsNav = document.getElementById("setsNav");
    sets.forEach(function(set) {
        renderSet(set);
        addSetAnchor(set.id, set.title);
    });

    document.querySelectorAll("#sets button.btn").forEach(b => b.onclick = handleClick);
}

function addSetAnchor(setId, title) {
    let counter = `<span class="badge badge-secondary" id="b${setId}">${getCounter(setId)}</span> `;
    let anchor = `<a class="dropdown-item" href="#set${setId}">${counter} ${title}</a>`;
    setsNav.insertAdjacentHTML("beforeend", anchor);
}

function getCounter(setId) {
    let cards = sets[setId].cards.filter(x => x.count > 0).length;
    return `${cards}/${sets[setId].cards.length}`;
}

function renderSet(set) {
    let html = `<h1 id="set${set.id}" class="pt-5">${set.title}</h1>
    <div class="row">\n`;

    let cards = JSON.parse(JSON.stringify(set.cards));
    while (cards.length > 0) {
        let row = cards.splice(0, 4);
        row.forEach(card => html += renderCard(card));
    }

    html += "</div>\n";
    document.getElementById("sets").insertAdjacentHTML("beforeend", html);
}

function renderCard(card) {
    let count = card.id in ownedCards ? ownedCards[card.id] : card.count;
    let render = {
        normal: "col-xs-6 col-sm-6 col-lg-4 col-xl-3",
        high: "col-xs-6 col-sm-4 col-lg-3 col-xl-2"
    };
    return `    <div class="${render[gridDensity]}">
      <div class="card mb-4 shadow-lg">
        <img width="100%" src="https://www.scifihobby.com/products/theorville/season_one/graphics/cardsamples/${card.image}">
        <div class="card-body" id="${card.id}">
          <p>${card.caption}</p>
          <div class="card-text input-group m-auto">
            <div class="input-group-prepend">
              <button class="btn btn-secondary rounded-left" type="button" data-role="sub">-</button>
            </div>
            <input class="form-control text-center" type="number" min="0" value="${count}" readonly>
            <div class="input-group-append">
              <button class="btn btn-success rounded-right" type="button" data-role="add">+</button>
            </div>
          </div>
        </div>
      </div>
    </div>\n`;
}

function handleClick() {
    let count = this.parentNode.parentNode.querySelector("input");
    let cardId = this.parentNode.parentNode.parentNode.id;
    switch (this.getAttribute("data-role")) {
        case "sub":
            count.value = Number(count.value) > 0 ? Number(count.value) - 1 : 0;
            break;
        case "add":
            count.value = Number(count.value) + 1;
    }
    updateStorage(cardId, Number(count.value));
    updateCard(cardId, Number(count.value));
}

function updateStorage(cardId, count) {
    if (count === 0) {
        delete ownedCards[cardId];
    } else {
        ownedCards[cardId] = count;
    }
    if (Object.keys(ownedCards).length === 0) {
        localStorage.removeItem("orvilleCards");
    } else {
        initStorage();
        localStorage.setItem("orvilleCards", JSON.stringify(ownedCards));
    }
}

function initStorage() {
    try {
        let storage = getStorage();
    } catch (e) {
        resetStorage();
    }
}

function getStorage() {
    try {
        var storage = JSON.parse(localStorage.getItem("orvilleCards"));
    } catch(e) {
        console.log(typeof(storage));
    }
    storage = storage || {};
    Object.keys(storage).forEach(key => updateCard(key, storage[key]));
    return storage;
}

function resetStorage() {
    localStorage.setItem("orvilleCards", JSON.stringify({}));
}

function updateCard(cardId, count) {
    let frag = cardId.split("-");
    let setId = frag[1];
    try {
        sets[setId].cards[frag[2]].count = count;
        updateSetBadge(setId);
    } catch (e) {
        console.log(cardId, frag, setId, e);
    }
}

function updateSetBadge(setId) {
    let badge = document.getElementById("b" + setId);
    if (badge !== null) {
        badge.innerText = getCounter(setId);
    }
}
